<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>活在低处</title>
    <description>“来自山川湖海，却囿于昼夜，厨房与爱。”</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 28 Feb 2019 11:48:50 +0800</pubDate>
    <lastBuildDate>Thu, 28 Feb 2019 11:48:50 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>读书:How Will You Measure Your Life?</title>
        <description>&lt;p&gt;在读到&lt;a href=&quot;https://www.amazon.com/gp/product/0062102419&quot;&gt;《How Will You Measure Your Life? 》&lt;/a&gt; 这本书之前，是看到一篇&lt;a href=&quot;https://danielvassallo.com/only-intrinsic-motivation-lasts/&quot;&gt;辞去亚马逊年薪500万工作的文章&lt;/a&gt;，大概是讲随着工作中升职，加薪，工作激情却在逐渐降低，于是就辞去了高薪工作。&lt;/p&gt;

&lt;p&gt;在作者推文评论中有人说到了这本书，我以为这本书会讲如何提高在工作中的激情，于是就下载了电子版。&lt;/p&gt;

&lt;p&gt;但这本书更像是一本生活指南:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;要有长远规划，但也要注意短期计划，这两者是不冲突的&lt;/li&gt;
  &lt;li&gt;保持行动和目标一致&lt;/li&gt;
  &lt;li&gt;幸福的源泉很大一部分来自和家人和朋友的亲密关系&lt;/li&gt;
  &lt;li&gt;珍惜和孩子一起的时光&lt;/li&gt;
  &lt;li&gt;制定家庭文化，给孩子做榜样&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;关于我们生活中幸福的源泉，你首先必须回答：幸福是什么？可以看看&lt;a href=&quot;https://www.ted.com/talks/robert_waldinger_what_makes_a_good_life_lessons_from_the_longest_study_on_happiness&quot;&gt;这个TED演讲的解释&lt;/a&gt;,&lt;a href=&quot;https://open.163.com/movie/2016/1/B/T/MBAM75U2S_MBB7LQSBT.html&quot;&gt;网易有中文翻译&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;一旦你错过了改变事情的最佳时机，那么后面很难有机会纠正。&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 25 Feb 2019 02:24:47 +0800</pubDate>
        <link>http://localhost:4000/reading/2019/02/25/how-will-you-measure-your-life.html</link>
        <guid isPermaLink="true">http://localhost:4000/reading/2019/02/25/how-will-you-measure-your-life.html</guid>
        
        
        <category>Reading</category>
        
      </item>
    
      <item>
        <title>如何跑完半程马拉松</title>
        <description>&lt;p&gt;是的。&lt;/p&gt;

&lt;p&gt;如果你想先喝一碗高质量鸡汤，来加强跑马拉松的决心，那么你可以读读村上春树的&lt;a href=&quot;https://item.jd.com/11754532.html&quot;&gt;《当我谈跑步时,我谈些什么》&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;然而我觉得那对你真正跑起来并没有什么卵用。&lt;/p&gt;

&lt;p&gt;如果你对 &lt;strong&gt;马拉松&lt;/strong&gt; 的定义还仅仅停留在跑步这个层面上，那么你是应该好好在网络上搜索一下。&lt;/p&gt;

&lt;p&gt;首先我必须纠正一个普遍的认识误区，那就是把跑步或者跑马拉松当成获得某种利益的方式( 男的为了减肥，女的为了瘦身)。&lt;/p&gt;

&lt;p&gt;实际上，减肥和瘦身只是跑步的副产品，它带给你的远远不止这些。&lt;/p&gt;

&lt;p&gt;回到正题，本人只跑过半程马拉松，所以我在这里记录一下个人心得，记录在半程马拉松(21.0975公里)中每个阶段的感受。&lt;/p&gt;

&lt;h3 id=&quot;1公里&quot;&gt;1公里&lt;/h3&gt;
&lt;p&gt;在前1公里的时候，体内有充分的糖分，所以整个人的状态就是happy，感觉衣服上带有披风，帅帅的。&lt;/p&gt;

&lt;h3 id=&quot;2公里&quot;&gt;2公里&lt;/h3&gt;
&lt;p&gt;体内糖分消耗得差不多了，开始有点异样的感觉，但是一切还好。&lt;/p&gt;

&lt;h3 id=&quot;3公里&quot;&gt;3公里&lt;/h3&gt;
&lt;p&gt;这时候，大部分人基本上会感到开始有点不适应，身体会发出一种抵触(停下来)的信号。&lt;/p&gt;

&lt;h3 id=&quot;4公里&quot;&gt;4公里&lt;/h3&gt;
&lt;p&gt;拿出能量糖，来上一颗，继续。&lt;/p&gt;

&lt;h3 id=&quot;5公里&quot;&gt;5公里&lt;/h3&gt;
&lt;p&gt;哼，怎么感觉衣服上又有披风了，帅帅的。&lt;/p&gt;

&lt;h3 id=&quot;678910公里&quot;&gt;6，7，8，9，10公里&lt;/h3&gt;
&lt;p&gt;在匀速的情况下，思想开小差，想想天南地北的事情(大部分是在想曾经牛逼的时刻)。&lt;/p&gt;

&lt;h3 id=&quot;111213公里&quot;&gt;11，12，13公里&lt;/h3&gt;
&lt;p&gt;身体再次发出停下来的信号，因为心跳，呼吸开始没有节奏，疲惫的情绪愈发强烈，这时必须得上内心戏：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“是你自己要来跑的…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“说好的，要跑完…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“看看别人，那么多人都超过你了…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;自己对话大概五分钟。&lt;/p&gt;

&lt;h3 id=&quot;来到1415公里&quot;&gt;来到14，15公里&lt;/h3&gt;
&lt;p&gt;双腿开始有点麻木，其实不用大脑发出跑步的指令，双腿已经不能停下了，但是依旧疲惫，一种强烈想停下来的感觉不能自拔，继续内心戏：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“你个垃圾玩意儿,半程都搞不定…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“垃圾玩意儿…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“你就是个垃圾…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“垃圾…”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;掏出一粒能量糖，继续。&lt;/p&gt;

&lt;h3 id=&quot;1617公里&quot;&gt;16,17公里&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;“噫，我怎么跑了这么远了，还有5公里就到终点了, 哎哟，不错”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;18公里&quot;&gt;18公里&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;“加油哥们，马上你就做到了”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“哎哟，前面有两个cosplay，超过他们”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1920公里&quot;&gt;19，20公里&lt;/h3&gt;
&lt;p&gt;有很多人在加油助威，没脸停下来，继续。&lt;/p&gt;

&lt;h3 id=&quot;终点&quot;&gt;终点&lt;/h3&gt;
&lt;p&gt;冲过终点那一刻，大脑里面：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“我好牛逼”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“终于他妈到了”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“我买的水在哪里来着”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“我的衣服一定有披风”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“一会儿好好自拍两张”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;“哎妈，怎么觉得我是冠军呢”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;总结&quot;&gt;总结&lt;/h3&gt;
&lt;p&gt;我相信，第一个全程马拉松，我会有很多戏份。&lt;/p&gt;

&lt;h3 id=&quot;最后&quot;&gt;最后&lt;/h3&gt;
&lt;p&gt;对上面我个人感受进行整理，不难看出跑半程马拉松需要：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;确认目标&lt;/li&gt;
  &lt;li&gt;自我抵抗&lt;/li&gt;
  &lt;li&gt;自我批评&lt;/li&gt;
  &lt;li&gt;内心激励&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;然后才是科学的方法，饮食，呼吸，跑姿，监测心率，速度控制……(你可以在跑步社区或者网络找到更全的指南)。&lt;/p&gt;

&lt;p&gt;但小部分人只学会了 &lt;em&gt;确认目标&lt;/em&gt; 就挂了，对，就是死在了赛场上(可以浏览历年来跑死在马拉松赛场的新闻，死的原因几乎就是未解之谜)，这就是没有利用科学方法的悲哀。&lt;/p&gt;

&lt;p&gt;如果你迟迟不能迈出 &lt;em&gt;内心激励&lt;/em&gt; 这一步，那么对着镜子 &lt;strong&gt;看看你那坨放眼望去满是占尽生活便宜的身材&lt;/strong&gt;，沉默三分钟，然后该干嘛干嘛。&lt;/p&gt;
</description>
        <pubDate>Sun, 19 Feb 2017 02:24:47 +0800</pubDate>
        <link>http://localhost:4000/marathon/2017/02/19/how-to-run-half-marathons.html</link>
        <guid isPermaLink="true">http://localhost:4000/marathon/2017/02/19/how-to-run-half-marathons.html</guid>
        
        
        <category>Marathon</category>
        
      </item>
    
      <item>
        <title>如何利用Linux命令简单加密文本</title>
        <description>&lt;p&gt;在web上无论企业还是个人网站，总会发布一些邮箱的联系方式，由于邮箱地址置于html页面中，很容易被
爬虫获取，导致邮箱被垃圾邮件挤满。&lt;/p&gt;

&lt;p&gt;所以，如果你确定要暴露你的邮箱到互联网上，那么你至少应该使用一种加密方式。&lt;/p&gt;

&lt;p&gt;下面介绍两种简单加密方法。&lt;/p&gt;

&lt;h2 id=&quot;使用xxdbcdc命令加密解密&quot;&gt;使用xxd,bc,dc命令加密解密&lt;/h2&gt;

&lt;p&gt;第一步(将文本转换为16进制):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ echo &quot;xxxxx@gmail.com&quot;|xxd -ps -u&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ 787878787840676D61696C2E636F6D0A&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;第二步(将16进制转换为10进制):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ echo &quot;ibase=16; 787878787840676D61696C2E636F6D0A&quot;|bc&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ 160132878550962084828530736251255352586&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;解密:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ dc -e 160132878550962084828530736251255352586P&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;使用base64编码&quot;&gt;使用base64编码&lt;/h2&gt;

&lt;p&gt;第一步:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ echo &quot;xxxxx@gmail.com&quot;|base64 -i&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ eHh4eHhAZ21haWwuY29tCg==&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;第二步:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ echo &quot;eHh4eHhAZ21haWwuY29tCg==&quot;|base64 -d&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ xxxxx@gmail.com&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;上面的方法只是防止人和机器直接识别出文本，并算不上真正意义上的加密。&lt;/p&gt;
</description>
        <pubDate>Sun, 05 Feb 2017 02:24:47 +0800</pubDate>
        <link>http://localhost:4000/programming/2017/02/05/how-to-encrypt-by-linux-command.html</link>
        <guid isPermaLink="true">http://localhost:4000/programming/2017/02/05/how-to-encrypt-by-linux-command.html</guid>
        
        <category>security</category>
        
        
        <category>Programming</category>
        
      </item>
    
      <item>
        <title>Java多维数组</title>
        <description>&lt;p&gt;说多维数组之前，说说简单的数组定义:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;或者&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;当然也可以一次性定义多个变量&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;再简单不过了。&lt;/p&gt;

&lt;p&gt;继续看看下面的呢&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[][]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[][][];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;这是个几维数组?
恕我愚钝，尽管搞了这么多年java，还是第一次遇到这样的定义(因为工作中很少遇到这样的使用场景)。
先看看&lt;a href=&quot;http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html&quot;&gt;Java language specification&lt;/a&gt; 中对数组变量声明的定义.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type arrayName[][[]...];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;或&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type[][[]...] arrayName;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;其实Java中的数组可以用矩阵来表示,比如 &lt;em&gt;int[][] a[]&lt;/em&gt; 则可以看成:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://posts.xiebiao.com/images/2017-01-15-java-multidimensional-arrays/matrix.png&quot; alt=&quot;矩阵&quot; title=&quot;矩阵&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;int[][] a[]&lt;/em&gt;  等同于 &lt;em&gt;int[][][] a&lt;/em&gt; ，你可以叫为三维数组，
所以 &lt;em&gt;int[][] a[][][]&lt;/em&gt; 也同于 &lt;em&gt;int[][][][][] a&lt;/em&gt;，叫为五维数组。&lt;/p&gt;

&lt;p&gt;其实从&lt;a href=&quot;http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html&quot;&gt;Java language specification&lt;/a&gt;中可以看出
&lt;em&gt;int[][]&lt;/em&gt; 可以理解为 &lt;em&gt;type&lt;/em&gt;，尽管定义中指出不推荐 &lt;em&gt;mixed notation&lt;/em&gt; 方式来声明多维数组,  但不影响这种表达式合法。&lt;/p&gt;
</description>
        <pubDate>Mon, 16 Jan 2017 04:24:47 +0800</pubDate>
        <link>http://localhost:4000/programming/2017/01/16/java-multidimensional-arrays.html</link>
        <guid isPermaLink="true">http://localhost:4000/programming/2017/01/16/java-multidimensional-arrays.html</guid>
        
        <category>java</category>
        
        
        <category>Programming</category>
        
      </item>
    
      <item>
        <title>我们是如何将一个项目做烂的</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;在你读到这篇牢骚的时候，无数个项目正在慢慢变烂。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://blog.xiebiao.com/images/2016-08-08-how-to-make-projects-failed/wenchuan_512.jpg&quot; alt=&quot;图片来源于网络 - 2008汶川大地震&quot; title=&quot;图片来源于网络 - 2008汶川大地震&quot; /&gt;&lt;/p&gt;

&lt;p&gt;既然标题都用到了”烂”这个词，那什么才是烂呢？&lt;/p&gt;

&lt;p&gt;在你的项目里，”烂”和”好”一样无法准确的衡量和定义，在大多数人的职业生涯里，你听到”烂”项目肯定比听到”好”项目的情况要多很多。&lt;/p&gt;

&lt;p&gt;当你在一个维护型项目面前，一边嘴里跑出一万只草尼马，一边还在上面Coding，最后居然还如期交付了维护任务，你能说那是”烂”项目吗?&lt;/p&gt;

&lt;p&gt;我自己也没有遇到过真正”烂”到无法维护的项目，因为我就是那个让项目慢慢变烂的人。&lt;/p&gt;

&lt;p&gt;也许，”烂”项目的罪证无法像&lt;a href=&quot;http://blog.jobbole.com/80241/&quot;&gt;《如何编写无法维护的代码》&lt;/a&gt;那样容易罗列，所以你根本就不认为那是烂。&lt;/p&gt;

&lt;p&gt;意识到项目的”烂”与闻到&lt;a href=&quot;http://item.jd.com/11728740.html&quot;&gt;《代码的坏味道》&lt;/a&gt;一样是优秀开发人员的基本素养。&lt;/p&gt;

&lt;p&gt;不过本文说的”烂”，只是从程序员的角度去看项目，与项目本身的创意，项目在公司层面的战略意义没有关系。&lt;/p&gt;

&lt;h3 id=&quot;工具&quot;&gt;工具&lt;/h3&gt;
&lt;p&gt;在我刚出道时（06年左右），那时候的Java生态圈其实已经很强大了，但是我刚毕业工作过的几家公司，几乎在项目部署上都没有使用太多的自动化工具。&lt;/p&gt;

&lt;p&gt;有的是直接用开发工具Eclipse打包war文件，其中一家公司，甚至是在本地编译Java文件，然后上传class文件到线上服务器，就算那时已经有 &lt;a href=&quot;http://ant.apache.org&quot;&gt;Ant&lt;/a&gt; 这样的先进工具，可惜我们还是类人猿，没有进化过来, 要知道&lt;strong&gt;制作和使用工具是人类起源的重要标志.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如今我们在一个最好的时代, 你有太多的选择， &lt;a href=&quot;http://ant.apache.org&quot;&gt;Ant&lt;/a&gt;，&lt;a href=&quot;http://mavent.apache.org&quot;&gt;Maven&lt;/a&gt;，&lt;a href=&quot;http://www.gradle.org&quot;&gt;Gradle&lt;/a&gt; ……, 无论如何请把打造高可用自动化工具链与开发高可用系统提升到同样一个高度。&lt;/p&gt;

&lt;p&gt;如果你的项目中使用到了工具，但是它却很脆弱：过多依赖环境，依赖复杂的配置，有时候还会有BUG。&lt;/p&gt;

&lt;p&gt;如果你的项目还不能做到一键命令构建，打包。&lt;/p&gt;

&lt;p&gt;如果你的测试环境和线上环境程序部署时间不在可控范围。&lt;/p&gt;

&lt;p&gt;……&lt;/p&gt;

&lt;p&gt;那么你的项目，肯定会慢慢变烂, 因为效率太低。&lt;/p&gt;

&lt;h3 id=&quot;框架&quot;&gt;框架&lt;/h3&gt;
&lt;p&gt;是的，从你找工作开始，就肯定听说了这个词，如果你在学校的时候就是一个勤奋好学的同志，那么你早就听说过了，在Java的世界里，你不会几种框架，还好意思出去混吗，于是很多招聘里面都提到，精通Spring,Hibernate,Struts,Mybatis …
我入职的一家公司，甚至还有公司框架Demo代码学习这个环节。&lt;/p&gt;

&lt;p&gt;So，当你到公司第一次接触到项目的时候，我想上面提到的这几个框架，至少有一个出现在你的项目中，先来看看我遇到的项目中使用框架的情况：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用了框架，但是版本已经是上个世纪的了，却依然在线上跑着&lt;/li&gt;
  &lt;li&gt;依赖同一个第三方开源工具包，却有多个版本&lt;/li&gt;
  &lt;li&gt;有的地方用了框架的注解配置方式，有的地方却用的XML配置文件&lt;/li&gt;
  &lt;li&gt;一个本来只需要几十K代码搞定的项目，最后把框架依赖一起打包，至少几十M&lt;/li&gt;
  &lt;li&gt;没看出来为什么这个项目需要用到这个框架&lt;/li&gt;
  &lt;li&gt;……&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;框架一词原本来自建筑学，在软件行业里面，本人理解框架，就是解决特殊场景问题的 &lt;strong&gt;抽象&lt;/strong&gt; 实现。本着娱乐的精神，这里就不引入太书面的文字，容易引起反感。&lt;/p&gt;

&lt;p&gt;如果你的项目和我遇到的情况一样，满足了上面两点以上，我相信，只要这个项目还要继续，就会继续变烂，原因大概有以下几点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;你是一个有理想的男青年，你想把机械键盘砸在那个已经不知离职多久的前前前同事的脸上，然后大声喊出来“老子要重构”，然而老板说:可以，你先把这一堆需求实现了再说。&lt;/li&gt;
  &lt;li&gt;最后老板还是同意了，没事儿你就重构吧，但是，你敢把一个正在好好running的线上项目框架换成最新版本吗？（你的项目用到还不只一个框架，有些框架之间在版本上还有依赖的，你不可能只升级其中一个）&lt;/li&gt;
  &lt;li&gt;想到这里，再抬头看看周围Coding的同事，有的是已经工作了数年的老腊肉，还有一波刚入职的小鲜肉，他们是否和你一样有理想，有追求呢&lt;/li&gt;
  &lt;li&gt;……&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果你学过PMP，那么上面这些问题可以概括为风险和成本。&lt;/p&gt;

&lt;p&gt;引入了框架, 那么项目成员是否在框架上做足了技术储备? 如果仅仅是达到使用的地步,那么由于框架引发的问题,你是否能够在最短的时间内解决?&lt;/p&gt;

&lt;p&gt;不然框架就成了项目的枷锁，即使不会让项目慢慢变烂，也不会让项目慢慢变好。&lt;/p&gt;

&lt;h3 id=&quot;领域模型&quot;&gt;领域模型&lt;/h3&gt;
&lt;p&gt;对啊，没问题，我们项目里面的使用Spring，爽得不要不要的，Spring不是提倡面向接口编程吗，我们有完善的Service接口层。&lt;/p&gt;

&lt;p&gt;是的，就像上面提到的，我曾经学习过公司的框架Demo代码，里面把Module都分好了，Domain, Dao，Manager（用于管理DAO层的事务），Service，Web。
真实的情况却是，Service里面，一个Service接口对应了一个Dao（大部分情况是这样的），你有几个数据表，大概就有多少个Service接口，如果有个新业务来了，添加了一张表，就再搞一个Service接口,Service，Dao基本都是在为数据库CRUD服务。&lt;/p&gt;

&lt;p&gt;一个接口类从项目产生就没有出现过多个实现, 当时定义接口仅仅是为了遵循面向接口编程。&lt;/p&gt;

&lt;p&gt;在充满疑惑的岁月里，我找到了真相，原来我把名词理解错了，“DDD”的含义有两种，&lt;a href=&quot;http://www.infoq.com/cn/news/2013/10/data-driven-to-ddd/&quot;&gt;一个是Data-Driven Design，一个是Domain-Driven Design&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;一个没有领域模型抽象的项目，迟早要慢慢变烂。&lt;/p&gt;

&lt;h3 id=&quot;代码&quot;&gt;代码&lt;/h3&gt;
&lt;p&gt;框架和模型是让你站得更高的角度来看项目,最后还是得回到代码上,好的项目(应该说团队)一定能够找到一套规范(当前流行叫”军规”),  每个团队制定的规范可能有些不同,但还是能找到很多共性.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;代码规范(Checkstyle, 方法名,类名规范,注释规范,代码格式规范……)&lt;/li&gt;
  &lt;li&gt;工程规范(构建流程,版本发布……)&lt;/li&gt;
  &lt;li&gt;设计规范(设计复杂度控制,模块依赖……)&lt;/li&gt;
  &lt;li&gt;数据库表设计规范, SQL规范&lt;/li&gt;
  &lt;li&gt;……&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;经过我多年的经验,制定规范这事儿,其实重点在如何让项目成员理解和认同,最后才是执行,很多项目成员对规范的抵触源自浮浅地认为规范只能让他们将时间消耗在非功能性需求上.&lt;/p&gt;

&lt;p&gt;规范是一种认同感, 但要想让项目成员建立更好的认同感, 有时候你必须利用人格魅力(如果你有的话),或者惨痛的经验(老司机肯定有的).&lt;/p&gt;

&lt;p&gt;抬头看看你的项目, 能不能找到一条硬性要求的规范, 如果找不到, 可以直接跳出该文.&lt;/p&gt;

&lt;p&gt;如果你有所觉悟,然后只是到网上到处借鉴各种军规堆砌在项目里, 那么依然没什么卵用.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;规范并不能让你的代码变得多优秀&lt;/strong&gt;.规范只是防止代码里到处弥漫着单身屌丝程序员(猿)的个人感情色彩,规避一些显而易见的错误.&lt;/p&gt;

&lt;p&gt;有了规范, 你有没有&lt;strong&gt;&lt;a href=&quot;http://blog.takipi.com/5-code-review-tricks-the-experts-use-based-on-3-2-million-lines-of-code/&quot;&gt;代码审查&lt;/a&gt;&lt;/strong&gt;?&lt;/p&gt;

&lt;p&gt;你在网络上到处都能搜索到” XX团队如何看重代码审查,XX团队为了代码质量开发了一个代码审查工具”, 可是你很难找到XX团队是如何做代码审查的,所以搞清楚如何让代码审查起到作用 比代码审查本身更重要.&lt;/p&gt;

&lt;p&gt;总之,在代码审查之外,你还需要权衡,要不要把代码审查搞成政治任务,要不要搞成批斗大会, 如果你在代码审查的气氛里面闻到了坏味道, 那就应该停下来.&lt;/p&gt;

&lt;p&gt;一个做好了代码规范和代码审查的项目,想变烂都没那么容易.&lt;/p&gt;

&lt;h3 id=&quot;测试&quot;&gt;测试&lt;/h3&gt;
&lt;p&gt;我在大学里面学编程的时候，似乎老师都没教过什么是测试，当时写TC的时候，老师只是说上机执行，现在回想起来，好像当时的教材也没有专门讲测试。（也许我就没有好好学过）&lt;/p&gt;

&lt;p&gt;从项目代码来看，最基本的就是单元测试。&lt;/p&gt;

&lt;p&gt;你的项目虽然有单元测试，但是他们要么过时（没有和被测试代码一起演化），要么根本就没有达到覆盖率要求。&lt;/p&gt;

&lt;p&gt;当你想给一个功能补写单元测试的时候，发现编写单元测试的难度比重新实现这个功能的难度还要大，结果你就真那样做了。&lt;/p&gt;

&lt;p&gt;测试的目的就是为了发现尽可能多的缺陷， &lt;strong&gt;尽量&lt;/strong&gt; 保证质量。&lt;/p&gt;

&lt;p&gt;然而很多项目根本就没有清晰定义出 &lt;strong&gt;质量&lt;/strong&gt; 的边界，甚至只完成了功能测试。&lt;/p&gt;

&lt;p&gt;罗列你项目中的测试项，将他们分类列举，如果测试项用一张纸都能写完，
那么这个项目本身就是烂的，根本不需要慢慢变烂。&lt;/p&gt;

&lt;p&gt;再强调一下，如果没有充分测试（怎样才是充分测试？）的项目，其实已经烂了。&lt;/p&gt;

&lt;h3 id=&quot;需求&quot;&gt;需求&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;所有的业务需求你都应该去满足&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;业务是项目的基本驱动力，可以说没有需求就没有项目存在。&lt;/p&gt;

&lt;p&gt;然而对于一个发展中的项目，有可能正是需求在让它慢慢变烂.&lt;/p&gt;

&lt;p&gt;因为我见过太多的需求来至项目控制人员(简称领导),而不是来至于真正用户,这些项目控制人员还会振振有词地说:”我也是用户中的一员”,大部分开发人员基本上又都处于食物链的最低端, 所以遇到上面这种情况,基本是无解的(排除那些真正执行工程师文化的公司).&lt;/p&gt;

&lt;p&gt;大部分项目的需求，都会对应到一个系统功能，系统功能都会有生命周期，但是项目中的代码却往往随需求一起增长，对于过时的功能代码，没人敢随便删除，然后就变得臃肿。&lt;/p&gt;

&lt;p&gt;另外一种情况就是需求超越了领域模型，例如：ATM取款机，让你植入视频播放功能（现实生活中却真有的）,你有时候无法分辨出这类需求，然后却漂亮地实现了它。&lt;/p&gt;

&lt;p&gt;恭喜你，你的项目正在面临慢慢变烂的风险。&lt;/p&gt;

&lt;h3 id=&quot;负面情绪&quot;&gt;负面情绪&lt;/h3&gt;
&lt;p&gt;负面情绪让项目慢慢变烂，听起来有点牵强，其实负面情绪与项目中的”烂”有点像鸡与蛋的关系，但这也只是其中一方面，放眼望去，项目中的负面情绪来自于方方面面。&lt;/p&gt;

&lt;p&gt;部分开发人员如果遇到&lt;a href=&quot;http://blog.jobbole.com/80241/&quot;&gt;《如何编写无法维护的代码》&lt;/a&gt; 中提到的问题会让他们大怒，然后抱怨没有统一的代码格式化工具，没有规范的目录结构，甚至日志输出格式也是五花八门……&lt;/p&gt;

&lt;p&gt;如果你在项目中经常听到这种骂街的声音，那么你所在的项目还不至于那么快变烂。&lt;/p&gt;

&lt;p&gt;不满现实，并动手去改变它，这也是优秀程序员的基本素养，但你必须停下来思索一下，你周围的人是不满的多，还是动手去改变的人多。&lt;/p&gt;

&lt;p&gt;我自己就非常愿意和不满现实并且情绪化的开发人员一起工作，非常惧怕那些只是抱怨，说到动手去改变的时候又保持沉默的人。&lt;/p&gt;

&lt;p&gt;情绪会传染，有些情绪在团队中会产生负面的效果，有些却能成为动力，这取决于团队的自我认知能力。&lt;/p&gt;

&lt;p&gt;如何识别项目中遇到的负面情绪呢？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;小A最近经常一边写代码，一边逛招聘网站&lt;/li&gt;
  &lt;li&gt;小B经常给你说，[某某公司]的工资更高，全员MAC环境开发，23寸显示器…&lt;/li&gt;
  &lt;li&gt;小C给你讲，小A和小B的代码写得真烂&lt;/li&gt;
  &lt;li&gt;小D抱怨技术上得不到提高&lt;/li&gt;
  &lt;li&gt;……&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;放心，如果你在项目中是个领导角色，上面这些抱怨列表你基本上是不会听到的，如果你只是一个普通的开发人员，那么就去购买一本《程序员自我修养》,将负面情绪转化为正能量。&lt;/p&gt;

&lt;h3 id=&quot;保持现状&quot;&gt;保持现状&lt;/h3&gt;
&lt;p&gt;有一个老程序员自豪地告诉我，他写的一个程序已经在线上跑了快10年了，从来没动过。&lt;/p&gt;

&lt;p&gt;我只是笑了笑，说了一句：牛逼&lt;/p&gt;

&lt;p&gt;如果我写一个打印Hello world的程序，部署在一台太阳能Linux机器上，然后把它放到外太空,谁知道能运行多久呢。&lt;/p&gt;

&lt;p&gt;我做的部分项目里面，用到的第三方工具距离最新版发布时间有的至少快5年了。&lt;/p&gt;

&lt;p&gt;同事告诉我，用着这么稳定，干嘛要升级。&lt;/p&gt;

&lt;p&gt;你要知道，JDK现在多久发布一次？每次都有哪些BUG修复？有哪些性能提升？你用的这个第三方包，可是在5年前那个版本的JDK下开发完成的，而且那个开发第三方工具包的人有可能还死了。&lt;/p&gt;

&lt;p&gt;请注意,我们不是在讨论升级的问题,我们是在讨论 &lt;strong&gt;变化&lt;/strong&gt; 的问题.&lt;/p&gt;

&lt;p&gt;保持现状是一种惰性思维，它已经麻痹了开发人员对项目变化带来的风险评估。&lt;/p&gt;

&lt;p&gt;如果将项目比做一辆汽车，它只是在不停地行驶，却没有定期保养。（重点是你不知道应该保养哪些部件）&lt;/p&gt;

&lt;p&gt;不要让保持现状的思维腐蚀了项目，让项目慢慢变烂。&lt;/p&gt;
</description>
        <pubDate>Mon, 08 Aug 2016 09:24:47 +0800</pubDate>
        <link>http://localhost:4000/engineering/2016/08/08/how-to-make-projects-failed.html</link>
        <guid isPermaLink="true">http://localhost:4000/engineering/2016/08/08/how-to-make-projects-failed.html</guid>
        
        
        <category>Engineering</category>
        
      </item>
    
      <item>
        <title>Notification Pattern理解</title>
        <description>&lt;h2 id=&quot;场景&quot;&gt;场景&lt;/h2&gt;
&lt;p&gt;在MVC的架构中，我们想从Model层传递一些错误信息到View层，比如用户注册这个功能，用户填写了密码，邮箱，然后提交注册，
这时候我们后端需要对前端的数据做校验，同时将校验的结果返回给View层，这时候就能用到Notification模式.&lt;/p&gt;

&lt;h2 id=&quot;思路&quot;&gt;思路&lt;/h2&gt;
&lt;p&gt;先定义Notification:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_errors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hasError&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;_errors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;_errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;messgae&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;_message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;messgae&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;set_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;_message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;定义IDomainValidator接口，如果是接口，notification就是实例共享的，在调用完errors方法后，需要clear，注意防止多线程问题，我这里用的抽象类&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IDomainValidator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;cm&quot;&gt;/* 校验结果通知 */&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Notification&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IDomainValidator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;领域模型：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDomainValidator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;cm&quot;&gt;/**
	 * 校验领域模型
	 */&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;年龄小于18岁&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xiaog&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;名字不能为:&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// 当然你还可以对该领域做其他的校验&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getAge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setAge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;测试:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xiaog&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasError&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		  &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Notification模式的好处是：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一次处理多条信息&lt;/li&gt;
  &lt;li&gt;消耗更少的系统资源（也就是尽量在系统中少抛出Exception，少一些catch) 你还可以对这个模式进行扩展，将错误信息进一步封装。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://martinfowler.com/eaaDev/Notification.html&quot;&gt;Notification&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 20 Jun 2012 19:24:47 +0800</pubDate>
        <link>http://localhost:4000/programming/2012/06/20/notification-pattern.html</link>
        <guid isPermaLink="true">http://localhost:4000/programming/2012/06/20/notification-pattern.html</guid>
        
        <category>pattern</category>
        
        
        <category>Programming</category>
        
      </item>
    
  </channel>
</rss>
